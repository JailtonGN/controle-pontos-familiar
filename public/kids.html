<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastros de Crian√ßas - Controle de Pontos Familiar</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/png" href="assets/logo.png">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="navbar-container">
            <div class="navbar-content">
                <!-- Brand -->
                <div class="navbar-brand">
                    <div class="navbar-logo"></div>
                    <div>
                        <div class="navbar-title">Cadastros</div>
                        <div class="navbar-subtitle">Sistema de Pontos</div>
                    </div>
                </div>

                <!-- Desktop Menu -->
                <div class="navbar-menu">
                    <div class="navbar-item">
                        <a href="/dashboard" class="navbar-button" id="nav-dashboard">
                            <span class="navbar-button-text">Tela Inicial</span>
                        </a>
                    </div>
                    <div class="navbar-item">
                        <a href="/manage-points" class="navbar-button" id="nav-activities">
                            <span class="navbar-button-text">Atividades</span>
                        </a>
                    </div>
                    <div class="navbar-item">
                        <a href="/kids" class="navbar-button active" id="nav-kids">
                            <span class="navbar-button-text">Cadastros</span>
                        </a>
                    </div>
                    
                    <div class="navbar-item">
                        <a href="/communication" class="navbar-button" id="nav-communication">
                            <span class="navbar-button-text">Comunica√ß√£o</span>
                        </a>
                    </div>
                    <div class="navbar-item">
                        <a href="/settings" class="navbar-button" id="nav-settings">
                            <span class="navbar-button-text">Configura√ß√£o</span>
                        </a>
                    </div>
                </div>

                <!-- User Menu -->
                <div class="navbar-user">
                    <span id="user-name" class="navbar-user-name"></span>
                    <button onclick="logout()" class="navbar-button navbar-button-logout">
                        Sair
                    </button>
                </div>

                <!-- Mobile Menu Button -->
                <div class="navbar-mobile-menu">
                    <button class="navbar-mobile-button" onclick="toggleMobileMenu()">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Mobile Menu -->
            <div id="mobile-menu" class="navbar-mobile-menu-content hidden">
                <a href="/dashboard" class="navbar-mobile-item" onclick="setActiveNav('nav-dashboard')">
                    Tela Inicial
                </a>
                <a href="/manage-points" class="navbar-mobile-item" onclick="setActiveNav('nav-activities')">
                    Atividades
                </a>
                <a href="/kids" class="navbar-mobile-item active" onclick="setActiveNav('nav-kids')">
                    Cadastros
                </a>
                
                <a href="/communication" class="navbar-mobile-item" onclick="setActiveNav('nav-communication')">
                    Comunica√ß√£o
                </a>
                <a href="/settings" class="navbar-mobile-item" onclick="setActiveNav('nav-settings')">
                    Configura√ß√£o
                </a>
            </div>
        </div>
    </nav>

         <!-- Main Content -->
     <main class="container" style="padding-top: 32px; padding-bottom: 32px;">
         <!-- Abas de Navega√ß√£o -->
         <div class="professional-section">
             <div class="professional-card">
                 <div class="professional-card-header">
                     <div class="professional-card-title">
                         Cadastros
                     </div>
                     <div class="professional-card-subtitle">Gerencie crian√ßas e atividades</div>
                 </div>
                 <div class="professional-card-body">
                     <div class="tab-navigation">
                         <button class="tab-button active" onclick="showTab('kids')" id="tab-kids">
                             Crian√ßas
                         </button>
                         <button class="tab-button" onclick="showTab('activities')" id="tab-activities">
                             Atividades
                         </button>
                     </div>
                 </div>
             </div>
         </div>

         <!-- Aba Crian√ßas -->
         <div id="kids-tab" class="tab-content active">
             <!-- Formul√°rio de Cria√ß√£o -->
             <div class="professional-section">
                 <div class="professional-card">
                     <div class="professional-card-header">
                         <div class="professional-card-title">
                             Criar Nova Crian√ßa
                         </div>
                         <div class="professional-card-subtitle">Adicione uma nova crian√ßa ao sistema</div>
                     </div>
                <div class="professional-card-body">
                    <form id="create-kid-form" class="professional-form-grid">
                        <div class="professional-input-group">
                            <label for="kid-name" class="professional-label">Nome da Crian√ßa</label>
                            <input type="text" id="kid-name" name="name" required class="professional-input" placeholder="Digite o nome">
                        </div>
                        
                        <div class="professional-input-group">
                            <label class="professional-label">Emoji</label>
                            <div class="emoji-selector">
                                <div class="emoji-options">
                                    <button type="button" class="emoji-option" data-emoji="üë¶" onclick="selectEmoji(this, 'üë¶')">
                                        üë¶ Menino
                                    </button>
                                    <button type="button" class="emoji-option" data-emoji="üëß" onclick="selectEmoji(this, 'üëß')">
                                        üëß Menina
                                    </button>
                                </div>
                                <input type="hidden" id="kid-emoji" name="emoji" required>
                            </div>
                        </div>
                        
                        <div class="professional-input-group">
                            <label for="kid-color" class="professional-label">Cor</label>
                            <select id="kid-color" name="color" required class="professional-input">
                                <option value="">Escolha uma cor</option>
                                <option value="#3B82F6">Azul</option>
                                <option value="#EF4444">Vermelho</option>
                                <option value="#10B981">Verde</option>
                                <option value="#F59E0B">Amarelo</option>
                                <option value="#8B5CF6">Roxo</option>
                                <option value="#F97316">Laranja</option>
                                <option value="#EC4899">Rosa</option>
                                <option value="#06B6D4">Ciano</option>
                            </select>
                        </div>
                        
                        <div class="professional-input-group">
                            <label for="kid-pin" class="professional-label">PIN de Acesso</label>
                            <input type="password" id="kid-pin" name="pin" required class="professional-input" placeholder="Digite um PIN de 4 d√≠gitos" minlength="4" maxlength="4" pattern="[0-9]{4}">
                        </div>
                        
                        <div class="professional-input-group">
                            <label for="kid-age" class="professional-label">Idade</label>
                            <input type="number" id="kid-age" name="age" min="1" max="18" required class="professional-input" placeholder="Idade">
                        </div>
                        
                        <div class="professional-input-group" style="grid-column: 1 / -1;">
                            <button type="submit" class="professional-button professional-button-success" style="width: 100%;">
                                Criar Crian√ßa
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Crian√ßas Criadas -->
        <div class="professional-section">
            <div class="professional-card">
                <div class="professional-card-header">
                    <div class="professional-card-title">
                        Crian√ßas Criadas
                    </div>
                    <div class="professional-card-subtitle">Gerencie as crian√ßas do sistema</div>
                </div>
                <div class="professional-card-body">
                    <div id="kids-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Cards das crian√ßas ser√£o carregados aqui -->
                    </div>
                                 </div>
             </div>
         </div>
         </div>

         <!-- Aba Atividades -->
         <div id="activities-tab" class="tab-content">
             <!-- Formul√°rio de Cria√ß√£o de Atividade -->
             <div class="professional-section">
                 <div class="professional-card">
                     <div class="professional-card-header">
                         <div class="professional-card-title">
                             Criar Nova Atividade
                         </div>
                         <div class="professional-card-subtitle">Adicione uma nova atividade ao sistema</div>
                     </div>
                     <div class="professional-card-body">
                         <form id="create-activity-form" class="professional-form-grid">
                             <div class="professional-input-group">
                                 <label for="activity-name" class="professional-label">Nome da Atividade</label>
                                 <input type="text" id="activity-name" name="name" required class="professional-input" placeholder="Ex: Arrumar o quarto">
                             </div>
                             
                             <div class="professional-input-group">
                                 <label for="activity-type" class="professional-label">Tipo</label>
                                 <select id="activity-type" name="type" required class="professional-input">
                                     <option value="">Escolha o tipo</option>
                                     <option value="positive">Positiva (+ pontos)</option>
                                     <option value="negative">Negativa (- pontos)</option>
                                 </select>
                             </div>
                             
                             <div class="professional-input-group">
                                 <label for="activity-points" class="professional-label">Pontos</label>
                                 <input type="number" id="activity-points" name="points" required class="professional-input" placeholder="Quantidade de pontos" min="1">
                             </div>
                             
                             <div class="professional-input-group">
                                 <label for="activity-description" class="professional-label">Descri√ß√£o (opcional)</label>
                                 <textarea id="activity-description" name="description" class="professional-input" placeholder="Descri√ß√£o da atividade" rows="3"></textarea>
                             </div>
                             
                             <div class="professional-input-group" style="grid-column: 1 / -1;">
                                 <button type="submit" class="professional-button professional-button-success" style="width: 100%;">
                                     Criar Atividade
                                 </button>
                             </div>
                         </form>
                     </div>
                 </div>
             </div>

             <!-- Atividades Criadas -->
             <div class="professional-section">
                 <div class="professional-card">
                     <div class="professional-card-header">
                         <div class="professional-card-title">
                             Atividades Cadastradas
                         </div>
                         <div class="professional-card-subtitle">Gerencie as atividades do sistema</div>
                     </div>
                     <div class="professional-card-body">
                         <!-- Nova se√ß√£o com caixas separadas -->
                         <div class="activities-grid">
                             <!-- Caixa de Atividades Positivas -->
                             <div class="activities-box activities-positive">
                                 <div class="activities-box-header">
                                     <div class="activities-box-icon positive-icon">‚≠ê</div>
                                     <div class="activities-box-title">Atividades Positivas</div>
                                     <div class="activities-box-subtitle">Comportamentos que geram pontos</div>
                                 </div>
                                 <div class="activities-box-content" id="positive-activities">
                                     <!-- Atividades positivas ser√£o carregadas aqui -->
                                 </div>
                             </div>

                             <!-- Caixa de Atividades Negativas -->
                             <div class="activities-box activities-negative">
                                 <div class="activities-box-header">
                                     <div class="activities-box-icon negative-icon">‚ö†Ô∏è</div>
                                     <div class="activities-box-title">Atividades Negativas</div>
                                     <div class="activities-box-subtitle">Comportamentos que removem pontos</div>
                                 </div>
                                 <div class="activities-box-content" id="negative-activities">
                                     <!-- Atividades negativas ser√£o carregadas aqui -->
                                 </div>
                             </div>
                         </div>
                     </div>
                 </div>
             </div>
         </div>
     </main>

    <!-- Modal Editar Crian√ßa -->
    <div id="edit-kid-modal" class="modal hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 border-t-8 border-blue-500">
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center">
                        <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                            <span class="text-blue-500 text-2xl">‚úèÔ∏è</span>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-900">Editar Crian√ßa</h3>
                    </div>
                    <button onclick="hideEditKidModal()" class="text-gray-400 hover:text-gray-600 text-3xl font-bold">
                        √ó
                    </button>
                </div>
                <form id="edit-kid-form" class="space-y-5">
                    <input type="hidden" id="edit-kid-id" name="id">
                    <div>
                        <label for="edit-kid-name" class="block text-sm font-medium text-gray-700">Nome</label>
                        <input type="text" id="edit-kid-name" name="name" required class="professional-input">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Emoji</label>
                        <div class="emoji-selector">
                            <div class="emoji-options">
                                <button type="button" class="emoji-option" data-emoji="üë¶" onclick="selectEditEmoji(this, 'üë¶')">üë¶ Menino</button>
                                <button type="button" class="emoji-option" data-emoji="üëß" onclick="selectEditEmoji(this, 'üëß')">üëß Menina</button>
                            </div>
                            <input type="hidden" id="edit-kid-emoji" name="emoji" required>
                        </div>
                    </div>
                    <div>
                        <label for="edit-kid-color" class="block text-sm font-medium text-gray-700">Cor</label>
                        <select id="edit-kid-color" name="color" required class="professional-input">
                            <option value="#3B82F6">Azul</option>
                            <option value="#EF4444">Vermelho</option>
                            <option value="#10B981">Verde</option>
                            <option value="#F59E0B">Amarelo</option>
                            <option value="#8B5CF6">Roxo</option>
                            <option value="#F97316">Laranja</option>
                            <option value="#EC4899">Rosa</option>
                            <option value="#06B6D4">Ciano</option>
                        </select>
                    </div>
                    <div>
                        <label for="edit-kid-pin" class="block text-sm font-medium text-gray-700">PIN de Acesso</label>
                        <input type="password" id="edit-kid-pin" name="pin" required class="professional-input" minlength="4" maxlength="4" pattern="[0-9]{4}">
                    </div>
                    <div>
                        <label for="edit-kid-age" class="block text-sm font-medium text-gray-700">Idade</label>
                        <input type="number" id="edit-kid-age" name="age" min="1" max="18" required class="professional-input">
                    </div>
                    <div class="flex justify-end space-x-3 mt-6">
                        <button type="button" onclick="hideEditKidModal()" class="btn btn-secondary rounded-full px-6 py-2">
                            Cancelar
                        </button>
                        <button type="submit" class="btn btn-primary rounded-full px-6 py-2">
                            Salvar
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de Confirma√ß√£o -->
    <div id="confirm-modal" class="modal hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl shadow-2xl max-w-sm w-full p-8 border-t-8 border-red-500">
                <div class="flex items-center mb-6">
                    <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3">
                        <span class="text-red-500 text-2xl">üóëÔ∏è</span>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900">Confirmar Exclus√£o</h3>
                </div>
                <p class="text-base text-gray-600 mb-6">Tem certeza que deseja excluir esta crian√ßa? Esta a√ß√£o n√£o pode ser desfeita.</p>
                <div class="flex justify-end space-x-3">
                    <button onclick="hideConfirmModal()" class="btn btn-secondary rounded-full px-6 py-2">
                        Cancelar
                    </button>
                    <button onclick="confirmDelete()" class="btn btn-danger rounded-full px-6 py-2">
                        Excluir
                    </button>
                </div>
            </div>
        </div>
    </div>

         <script src="js/main.js"></script>
     <script>
         // Vari√°veis espec√≠ficas da p√°gina de cadastros
         let currentKidId = null;
         let currentActivityId = null;

                  // Fun√ß√£o para gerenciar abas
         function showTab(tabName) {
             // Esconder todas as abas
             document.querySelectorAll('.tab-content').forEach(tab => {
                 tab.classList.remove('active');
             });
             
             // Remover active de todos os bot√µes
             document.querySelectorAll('.tab-button').forEach(btn => {
                 btn.classList.remove('active');
             });
             
             // Mostrar aba selecionada
             document.getElementById(`${tabName}-tab`).classList.add('active');
             document.getElementById(`tab-${tabName}`).classList.add('active');
         }

         // Carregar dados na inicializa√ß√£o
         document.addEventListener('DOMContentLoaded', function() {
             loadKids();
             loadActivities();
         });

                 // Renderizar grid de crian√ßas (espec√≠fico para esta p√°gina)
         function renderKidsGrid() {
             const grid = document.getElementById('kids-grid');
             
             if (kids.length === 0) {
                 grid.innerHTML = `
                     <div class="col-span-full text-center py-12">
                         <div class="text-gray-400 text-6xl mb-4">üë∂</div>
                         <p class="text-gray-500 text-lg">Nenhuma crian√ßa cadastrada</p>
                         <p class="text-gray-400 text-sm">Crie sua primeira crian√ßa usando o formul√°rio acima</p>
                     </div>
                 `;
                 return;
             }

             grid.innerHTML = kids.map(kid => `
                 <div class="professional-summary-card">
                     <div class="professional-summary-header">
                         <div class="flex items-center justify-between">
                             <div class="flex items-center">
                                 <div class="ml-3">
                                     <div class="professional-summary-name">${kid.name}</div>
                                     <div class="professional-summary-age">${kid.age} anos</div>
                                 </div>
                             </div>
                         </div>
                     </div>
                                           <div class="mt-4 flex justify-end items-center">
                          <div class="flex space-x-2">
                              <button onclick="editKid('${kid._id}')" class="professional-button professional-button-secondary text-sm">
                                  Editar
                              </button>
                              <button onclick="deleteKid('${kid._id}')" class="professional-button professional-button-danger text-sm">
                                  Apagar
                              </button>
                          </div>
                      </div>
                 </div>
             `).join('');
         }

        

         // Renderizar atividades nas caixas separadas (espec√≠fico para esta p√°gina)
         function renderActivitiesList() {
             const positiveContainer = document.getElementById('positive-activities');
             const negativeContainer = document.getElementById('negative-activities');
             
             // Separar atividades por tipo
             const positiveActivities = activities.filter(activity => activity.type === 'positive');
             const negativeActivities = activities.filter(activity => activity.type === 'negative');
             
             // Renderizar atividades positivas
             if (positiveActivities.length === 0) {
                 positiveContainer.innerHTML = `
                     <div class="activities-empty">
                         <div class="activities-empty-icon">‚≠ê</div>
                         <h3>Nenhuma atividade positiva</h3>
                         <p>Adicione atividades positivas para come√ßar</p>
                     </div>
                 `;
             } else {
                 positiveContainer.innerHTML = positiveActivities.map(activity => `
                     <div class="activity-card">
                         <div class="activity-card-content">
                             <div class="activity-info">
                                 <div class="activity-icon">
                                     ${activity.icon || activity.name.charAt(0).toUpperCase()}
                                 </div>
                                 <div class="activity-details">
                                     <h3>${activity.name}</h3>
                                     <p>${activity.description || activity.category || ''}</p>
                                 </div>
                             </div>
                             <div class="activity-points positive">
                                 <span class="activity-points-number">+${activity.points}</span>
                                 <span>pontos</span>
                             </div>
                         </div>
                         <div class="activity-actions">
                             <button onclick="editActivity('${activity._id}')" class="activity-btn activity-btn-edit">
                                 ‚úèÔ∏è Editar
                             </button>
                             <button onclick="deleteActivity('${activity._id}')" class="activity-btn activity-btn-delete">
                                 üóëÔ∏è Apagar
                             </button>
                         </div>
                     </div>
                 `).join('');
             }
             
             // Renderizar atividades negativas
             if (negativeActivities.length === 0) {
                 negativeContainer.innerHTML = `
                     <div class="activities-empty">
                         <div class="activities-empty-icon">‚ö†Ô∏è</div>
                         <h3>Nenhuma atividade negativa</h3>
                         <p>Adicione atividades negativas para come√ßar</p>
                     </div>
                 `;
             } else {
                 negativeContainer.innerHTML = negativeActivities.map(activity => `
                     <div class="activity-card negative">
                         <div class="activity-card-content">
                             <div class="activity-info">
                                 <div class="activity-icon">
                                     ${activity.icon || activity.name.charAt(0).toUpperCase()}
                                 </div>
                                 <div class="activity-details">
                                     <h3>${activity.name}</h3>
                                     <p>${activity.description || activity.category || ''}</p>
                                 </div>
                             </div>
                             <div class="activity-points negative">
                                 <span class="activity-points-number">-${activity.points}</span>
                                 <span>pontos</span>
                             </div>
                         </div>
                         <div class="activity-actions">
                             <button onclick="editActivity('${activity._id}')" class="activity-btn activity-btn-edit">
                                 ‚úèÔ∏è Editar
                             </button>
                             <button onclick="deleteActivity('${activity._id}')" class="activity-btn activity-btn-delete">
                                 üóëÔ∏è Apagar
                             </button>
                         </div>
                     </div>
                 `).join('');
             }
         }

         

        // Mostrar modal de editar crian√ßa
        function editKid(kidId) {
            const kid = kids.find(k => k._id === kidId);
            if (!kid) return;

            document.getElementById('edit-kid-id').value = kid._id;
            document.getElementById('edit-kid-name').value = kid.name;
            document.getElementById('edit-kid-emoji').value = kid.emoji || '';
            document.getElementById('edit-kid-color').value = kid.color || '#3B82F6';
            document.getElementById('edit-kid-pin').value = kid.pin || '';
            document.getElementById('edit-kid-age').value = kid.age;
            currentKidId = kidId;
            
            // Selecionar o emoji correto no modal
            const emojiButtons = document.querySelectorAll('#edit-kid-modal .emoji-option');
            emojiButtons.forEach(btn => {
                btn.classList.remove('selected');
                if (btn.getAttribute('data-emoji') === (kid.emoji || '')) {
                    btn.classList.add('selected');
                }
            });
            
            document.getElementById('edit-kid-modal').classList.remove('hidden');
        }

        // Esconder modal de editar
        function hideEditKidModal() {
            document.getElementById('edit-kid-modal').classList.add('hidden');
        }

        // Excluir crian√ßa
        function deleteKid(kidId) {
            currentKidId = kidId;
            document.getElementById('confirm-modal').classList.remove('hidden');
        }

        // Esconder modal de confirma√ß√£o
        function hideConfirmModal() {
            document.getElementById('confirm-modal').classList.add('hidden');
            currentKidId = null;
        }

        // Confirmar exclus√£o
        async function confirmDelete() {
            if (!currentKidId) return;

            try {
                await API.delete(`/kids/${currentKidId}`);
                showNotification('Sucesso', 'Crian√ßa exclu√≠da com sucesso!', 'success');
                hideConfirmModal();
                loadKids();
            } catch (error) {
                showNotification('Erro', error.message, 'error');
            }
        }

        // Fun√ß√µes para sele√ß√£o de emoji
        function selectEmoji(button, emoji) {
            // Remover sele√ß√£o anterior
            document.querySelectorAll('.emoji-option').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Selecionar o bot√£o clicado
            button.classList.add('selected');
            
            // Atualizar o input hidden
            document.getElementById('kid-emoji').value = emoji;
        }

        function selectEditEmoji(button, emoji) {
            // Remover sele√ß√£o anterior
            document.querySelectorAll('#edit-kid-modal .emoji-option').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Selecionar o bot√£o clicado
            button.classList.add('selected');
            
            // Atualizar o input hidden
            document.getElementById('edit-kid-emoji').value = emoji;
        }

        // Event listener para o formul√°rio de cria√ß√£o
        document.getElementById('create-kid-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const data = {
                name: formData.get('name'),
                emoji: formData.get('emoji'),
                color: formData.get('color'),
                pin: formData.get('pin'),
                age: parseInt(formData.get('age'))
            };

            try {
                await API.post('/kids', data);
                showNotification('Sucesso', 'Crian√ßa criada com sucesso!', 'success');
                this.reset();
                // Limpar sele√ß√£o de emoji
                document.querySelectorAll('.emoji-option').forEach(btn => {
                    btn.classList.remove('selected');
                });
                loadKids();
            } catch (error) {
                showNotification('Erro', error.message, 'error');
            }
        });

                 // Fun√ß√µes para gerenciar atividades
         function editActivity(activityId) {
             const activity = activities.find(a => a._id === activityId);
             if (!activity) return;

             // Preencher formul√°rio de edi√ß√£o (implementar modal se necess√°rio)
             showNotification('Info', 'Funcionalidade de edi√ß√£o em desenvolvimento', 'info');
         }

         function deleteActivity(activityId) {
             currentActivityId = activityId;
             if (confirm('Tem certeza que deseja excluir esta atividade?')) {
                 confirmDeleteActivity();
             }
         }

         async function confirmDeleteActivity() {
             if (!currentActivityId) return;

             try {
                 await API.delete(`/activities/${currentActivityId}`);
                 showNotification('Sucesso', 'Atividade exclu√≠da com sucesso!', 'success');
                 loadActivities();
             } catch (error) {
                 showNotification('Erro', error.message, 'error');
             }
         }

         // Event listener para o formul√°rio de cria√ß√£o de atividades
         document.getElementById('create-activity-form').addEventListener('submit', async function(e) {
             e.preventDefault();
             
             const formData = new FormData(this);
             const data = {
                 name: formData.get('name'),
                 type: formData.get('type'),
                 points: parseInt(formData.get('points')),
                 description: formData.get('description') || ''
             };

             try {
                 await API.post('/activities', data);
                 showNotification('Sucesso', 'Atividade criada com sucesso!', 'success');
                 this.reset();
                 loadActivities();
             } catch (error) {
                 showNotification('Erro', error.message, 'error');
             }
         });

         // Event listener para o formul√°rio de edi√ß√£o
         document.getElementById('edit-kid-form').addEventListener('submit', async function(e) {
             e.preventDefault();
             
             const formData = new FormData(this);
             const data = {
                 name: formData.get('name'),
                 emoji: formData.get('emoji'),
                 color: formData.get('color'),
                 pin: formData.get('pin'),
                 age: parseInt(formData.get('age'))
             };

             try {
                 await API.put(`/kids/${currentKidId}`, data);
                 showNotification('Sucesso', 'Crian√ßa atualizada com sucesso!', 'success');
                 hideEditKidModal();
                 loadKids();
             } catch (error) {
                 showNotification('Erro', error.message, 'error');
             }
         });
    </script>
</body>
</html> 